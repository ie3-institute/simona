include "../common/akka.conf"

##################################################################
# Simulation Parameters
##################################################################
simona.simulationName = "vn_146_lv_small"

##################################################################
# Time Parameters
##################################################################
simona.time.startDateTime = "2011-05-01 00:00:00"
simona.time.endDateTime = "2011-05-01 01:00:00"
simona.time.schedulerReadyCheckWindow = 900
simona.time.stopOnFailedPowerFlow = true

##################################################################
# Input Parameters
##################################################################
simona.input.primary.csvParams = {
  folderPath=""
  csvSep: ";"
  timePattern: "yyyy-MM-dd'T'HH:mm[:ss[.SSS]]'Z[UTC]'"
}

simona.input.grid.datasource.id = "csv"
simona.input.grid.datasource.csvParams = {
  folderPath: "input/samples/vn_146_lv_small/fullGrid"
  csvSep: ","
}

simona.input.weather.datasource = {
  scheme = "icon"
  sampleParams.use = true
  coordinateSource.sampleParams.use = true
}

##################################################################
# Output Parameters
##################################################################
simona.output.base.dir = "output/vn_146_lv_small"
simona.output.base.addTimestampToOutputDir = true

simona.output.fileOutputFormat = ".csv"
simona.output.filePrefix = ""
simona.output.fileSuffix = ""

simona.output.sink.csv = {
  fileFormat = ".csv"
  filePrefix = ""
  fileSuffix = ""
}

simona.output.grid = {
  notifier = "grid"
  nodes = false
  lines = false
  switches = false
  transformers2w = false
  transformers3w = false
}
simona.output.participant.defaultConfig = {
  notifier = "default"
  powerRequestReply = false
  simulationResult = true
}
simona.output.participant.individualConfigs = []


##################################################################
# Runtime Configuration // todo refactor as this naming is misleading and partly unneeded
##################################################################
simona.runtime.selected_subgrids = []
simona.runtime.selected_volt_lvls = []

simona.runtime.participant.load = {
  defaultConfig = {
    calculateMissingReactivePowerWithModel = false
    uuids = ["default"]
    scaling = 1.0
    modelBehaviour = "fix"
    reference = "power"
  }
  individualConfigs = []
}

simona.runtime.participant.fixedFeedIn = {
  defaultConfig = {
    calculateMissingReactivePowerWithModel = false
    uuids = ["default"]
    scaling = 1.0
  }
  individualConfigs = []
}

simona.runtime.participant.pv = {
  defaultConfig = {
    calculateMissingReactivePowerWithModel = false
    uuids = ["default"]
    scaling = 1.0
  }
  individualConfigs = []
}

simona.runtime.participant.wec = {
  defaultConfig = {
    calculateMissingReactivePowerWithModel = false
    uuids = ["default"]
    scaling = 1.0
  }
  individualConfigs = []
}

simona.runtime.participant.evcs = {
  defaultConfig = {
    calculateMissingReactivePowerWithModel = false
    uuids = ["default"]
    scaling = 1.0
  }
  individualConfigs = []
}

##################################################################
# Event Configuration
##################################################################
simona.event.listener = []


simona.gridConfig.refSystems = [
  {sNom="100 kVA", vNom="0.4 kV", voltLvls = ["{NS, 0.4 kV}"]},
  {sNom="500 MVA", vNom="20 kV", voltLvls = ["{MS, 20 kV}"]}
]

##################################################################
# Power Flow Configuration
##################################################################
simona.powerflow.maxSweepPowerDeviation = 1E-5 // the maximum allowed deviation in power between two sweeps, before overall convergence is assumed
simona.powerflow.skipOnFailure = true
simona.powerflow.newtonraphson.epsilon = [1E-12]
simona.powerflow.newtonraphson.iterations = 50
simona.powerflow.resolution = "3600s"
tasks.named("test", Test) {
  useJUnitPlatform {
    includeEngines("scalatest")
    testLogging {
      events("skipped", "failed")
      exceptionFormat("full")
    }
  }
}

// test task performance improvements, see -> https://docs.gradle.org/current/userguide/performance.html
tasks.withType(Test).configureEach {
  // No parallel execution in order to avoid problems with insufficient computation resources/timeouts.
  // Sequential execution might be even faster, as some limited tests have shown.
  maxParallelForks = 1
  forkEvery = 100
}

tasks.withType(JavaCompile).configureEach {
  options.fork = true
  options.incremental = true
}

tasks.withType(ScalaCompile).configureEach {
  options.fork = true
  options.incremental = true
}
////////////////////////////////////////////////////////////////////////////
// Generate config classes reflecting the simona-config-tempalte.conf template file
////////////////////////////////////////////////////////////////////////////
task genConfigClass {
  doLast {
    def tscfgJarFile = project.file('build/tscfg-' + tscfgVersion + '.jar')
    if (!tscfgJarFile.exists() || !tscfgJarFile.isFile()) {
      download.run {
        src 'https://github.com/carueda/tscfg/releases/download/v' + tscfgVersion + '/tscfg-' + tscfgVersion + '.jar'
        dest buildDir
      }
    }
    javaexec {
      main = "-jar"
      args = [
        "build/tscfg-${tscfgVersion}.jar",
        "--spec",
        "src/main/resources/config/config-template.conf",
        "--scala",
        "--durations",
        "--pn",
        "edu.ie3.simona.config",
        "--cn",
        "SimonaConfig",
        "--dd",
        "src/main/scala/edu/ie3/simona/config/"
      ]
    }
  }
}

task genExperimentsConfigClass {
  doLast {
    def tscfgJarFile = project.file('build/tscfg-' + tscfgVersion + '.jar')
    if (!tscfgJarFile.exists() || !tscfgJarFile.isFile()) {
      download {
        src 'https://github.com/carueda/tscfg/releases/download/v' + tscfgVersion + '/tscfg-' + tscfgVersion + '.jar'
        dest buildDir
      }
    }
    javaexec {
      main = "-jar"
      args = [
        "build/tscfg-${tscfgVersion}.jar",
        "--spec",
        "src/main/resources/config/experiments-config-template.conf",
        "--scala",
        "--durations",
        "--pn",
        "edu.ie3.simona.config",
        "--cn",
        "ExperimentsConfig",
        "--dd",
        "src/main/scala/edu/ie3/simona/config/"
      ]
    }
  }
}


////////////////////////////////////////////////////////////////////////////
// Generate sample config file reflecting the application.conf template file
// This can be used to setup a new simulation configuration
////////////////////////////////////////////////////////////////////////////
task genConfigSample {
  doLast {
    def tscfgJarFile = project.file('build/tscfg-' + tscfgVersion + '.jar')
    if (!tscfgJarFile.exists() || !tscfgJarFile.isFile()) {
      download {
        src 'https://github.com/carueda/tscfg/releases/download/v' + tscfgVersion + '/tscfg-' + tscfgVersion + '.jar'
        dest buildDir
      }
    }
    javaexec {
      main = "-jar"
      args = [
        "build/tscfg-${tscfgVersion}.jar",
        "--spec",
        "src/main/resources/config/config-template.conf",
        "--tpl",
        "configs/simona/simonaSample.conf"
      ]
    }
  }
}
